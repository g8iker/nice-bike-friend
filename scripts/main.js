"use strict";function check_lines(){for(var e=[[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4}],[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4}],[{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4}],[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4}],[{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4}],[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0}],[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:4,y:1}],[{x:0,y:2},{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:4,y:2}],[{x:0,y:3},{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3}],[{x:0,y:4},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:4,y:4}],[{x:0,y:0},{x:1,y:1},{x:2,y:2},{x:3,y:3},{x:4,y:4}],[{x:4,y:0},{x:3,y:1},{x:2,y:2},{x:1,y:3},{x:0,y:4}]],a=e.length-1;a>=0;a--){var c=e[a];for(var t in c)var d=c[t].x,n=c[t].y}}function download_file(e,a){var c=document.createElement("a");c.href=a,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c)}function handleComplete(){var e=new createjs.Shape;e.graphics.beginBitmapFill(loader.getResult("background")).drawRect(0,0,w,h),stage.addChild(e);var a=new createjs.Shape;a.addEventListener("click",function(){window.open("http://www.facebook.com/share.php?u=".concat(encodeURIComponent(window.location.href)))}),a.graphics.beginFill("#FFFFFF").drawRect(1672,96,216,150),a.alpha=.1,stage.addChild(a);for(var c={w:370,h:225},t=0;t<rects.length;t++)for(var d=0;d<rects[t].length;d++)!function(e,a){var t=new createjs.Shape,d=36+e*c.w,n=245+a*c.h,i=loader.getResult("circle"),r=new createjs.Bitmap(i);r.x=d+65,r.y=n+20,rects[e][a].checked&&stage.addChild(r),t.addEventListener("click",function(){console.log("x/y",e,a),rects[e][a].checked?stage.removeChild(r):stage.addChild(r),stage.update(),rects[e][a].checked=!rects[e][a].checked,GAME.update_game_data(),check_lines()}),t.graphics.beginFill("#FFFFFF").drawRect(d,n,c.w,c.h),t.alpha=.1,stage.addChild(t)}(t,d);stage.update()}function init(){stage=new createjs.Stage("g8iker"),stage.canvas.width=1920,stage.canvas.height=1440,w=stage.canvas.width,h=stage.canvas.height;var e=[{src:"background.jpg",id:"background"},{src:"circle.png",id:"circle"}];loader=new createjs.LoadQueue(!1),loader.addEventListener("complete",handleComplete),loader.loadManifest(e,!0,"images/")}var GAME={},stage,loader,w,h,rects=[];!function(){for(var e=0;5>e;e++){rects[e]=[];for(var a=0;5>a;a++)rects[e].push({checked:!1})}}(),function(e){var a="http://events.g8iker.com/LayNxpNWR3/",c="2fd6c80d16278b094d4169afedc9aa7ad45b890e353cac2db323b553a2e8c1820e404da5fb24e050cfdb87fc61d61673683413dff735e5fbec4f2fedd37ac018";e.game_id=window.location.hash.substr(1),console.log(e.game_id);var t=!1;0===e.game_id.length&&(t=!0),t?$.ajax({url:a+"?access_key="+c,success:function(a){e.game_id=a.id,window.location.href=window.location.href+"#"+e.game_id,init()}}):$.ajax({url:a+e.game_id+"?access_key="+c,success:function(a){e.game_id=a.id,null!=a.data&&(rects=JSON.parse(a.data)),init()}}),e.update_game_data=function(){$.ajax({url:a+e.game_id+"?access_key="+c,method:"POST",dataType:"json",data:{data:JSON.stringify(rects)},success:function(e){}})}}(GAME);