function init(){stage=new createjs.Stage("g8iker"),stage.canvas.width=1920,stage.canvas.height=1440,w=stage.canvas.width,h=stage.canvas.height;var e=[{src:"background.jpg",id:"background"},{src:"circle.png",id:"circle"},{src:"line_v.png",id:"line_v"},{src:"line_h.png",id:"line_h"},{src:"line_backslash.png",id:"line_backslash"},{src:"line_slash.png",id:"line_slash"}];loader=new createjs.LoadQueue(!1),loader.addEventListener("complete",GAME.handleComplete),loader.loadManifest(e,!0,"images/")}!function(e){e.check_billy=function(e){var a=0;for(var c in drawed_lines)a++;a===e&&($("body").append('<iframe id="video-wrapper" width="560" height="315" src="https://www.youtube.com/embed/_cyuktfkHEY?&autoplay=true" frameborder="0" allowfullscreen></iframe>'),$("body").append('<div id="overlay"></div>'),$("#overlay").on("click",function(){$("#overlay").remove(),$("#video-wrapper").remove()})),console.log("line_types_length",e),console.log(a)}}(GAME),function(e){var a=[[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4}],[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4}],[{x:2,y:0},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:2,y:4}],[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4}],[{x:4,y:0},{x:4,y:1},{x:4,y:2},{x:4,y:3},{x:4,y:4}],[{x:0,y:0},{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0}],[{x:0,y:1},{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:4,y:1}],[{x:0,y:2},{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:4,y:2}],[{x:0,y:3},{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3}],[{x:0,y:4},{x:1,y:4},{x:2,y:4},{x:3,y:4},{x:4,y:4}],[{x:0,y:0},{x:1,y:1},{x:2,y:2},{x:3,y:3},{x:4,y:4}],[{x:4,y:0},{x:3,y:1},{x:2,y:2},{x:1,y:3},{x:0,y:4}]],c=["line_v","line_v","line_v","line_v","line_v","line_h","line_h","line_h","line_h","line_h","line_backslash","line_slash"];e.check_lines=function(){!function(){for(var e in drawed_lines)stage.removeChild(drawed_lines[e]);drawed_lines={}}();for(var i=a.length-1;i>=0;i--){var n,s,t=a[i],l=0;for(var d in t)n=t[d].x,s=t[d].y,rects[n][s].checked||l++;if(0===l){var r=c[i],o={x:a[i][0].x,y:a[i][0].y},y=new createjs.Bitmap(loader.getResult(r));switch(r){case"line_v":y.x=o.x*block_size.w+block_size.w/2-40,y.y=250;break;case"line_h":y.x=o.x*block_size.w+40,y.y=o.y*block_size.h+block_size.h/2+180;break;case"line_slash":case"line_backslash":y.x=50,y.y=270}drawed_lines[i]=y,stage.addChild(y),stage.update()}}e.check_billy(c.length)}}(GAME),function(e){e.handleComplete=function(){var a=new createjs.Shape;a.graphics.beginBitmapFill(loader.getResult("background")).drawRect(0,0,w,h),stage.addChild(a);var c=new createjs.Shape;c.addEventListener("click",function(){window.open("http://www.facebook.com/share.php?u=".concat(encodeURIComponent(window.location.href)))}),c.graphics.beginFill("#FFFFFF").drawRect(1672,96,216,150),c.alpha=.1,stage.addChild(c);for(var i=0;i<rects.length;i++)for(var n=0;n<rects[i].length;n++)!function(a,c){var i=new createjs.Shape,n=36+a*block_size.w,s=245+c*block_size.h,t=loader.getResult("circle"),l=new createjs.Bitmap(t);l.x=n+65,l.y=s+20,rects[a][c].checked&&stage.addChild(l),i.addEventListener("click",function(){console.log("x/y",a,c),rects[a][c].checked?stage.removeChild(l):stage.addChild(l),stage.update(),rects[a][c].checked=!rects[a][c].checked,e.update_game_data(),e.check_lines()}),i.graphics.beginFill("#FFFFFF").drawRect(n,s,block_size.w,block_size.h),i.alpha=.1,stage.addChild(i)}(i,n);stage.update(),e.check_lines()}}(GAME);var stage,loader,w,h,drawed_lines={},block_size={w:370,h:225},rects=[];!function(){for(var e=0;5>e;e++){rects[e]=[];for(var a=0;5>a;a++)rects[e].push({checked:!1})}}(),function(e){var a="http://events.g8iker.com/LayNxpNWR3/",c="2fd6c80d16278b094d4169afedc9aa7ad45b890e353cac2db323b553a2e8c1820e404da5fb24e050cfdb87fc61d61673683413dff735e5fbec4f2fedd37ac018";e.game_id=window.location.hash.substr(1);var i=!1;0===e.game_id.length&&(i=!0),i?$.ajax({url:a+"?access_key="+c,success:function(a){e.game_id=a.id,window.location.href=window.location.href+"#"+e.game_id,init()}}):$.ajax({url:a+e.game_id+"?access_key="+c,success:function(a){e.game_id=a.id,null!=a.data&&(rects=JSON.parse(a.data)),init()}}),e.update_game_data=function(){$.ajax({url:a+e.game_id+"?access_key="+c,method:"POST",dataType:"json",data:{data:JSON.stringify(rects)},success:function(e){}})}}(GAME);